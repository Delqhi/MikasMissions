module.exports=[2287,a=>{a.v({actions:"page-module__k-1wGq__actions",empty:"page-module__k-1wGq__empty",logList:"page-module__k-1wGq__logList",logMeta:"page-module__k-1wGq__logMeta",metaCard:"page-module__k-1wGq__metaCard",notice:"page-module__k-1wGq__notice",panel:"page-module__k-1wGq__panel",statusPill:"page-module__k-1wGq__statusPill",summary:"page-module__k-1wGq__summary"})},99244,a=>{"use strict";var b=a.i(7997),c=a.i(37936),d=a.i(5246);a.i(70396);var e=a.i(73727),f=a.i(61517),g=a.i(41931),h=a.i(2287);async function i(){let a=await (0,d.cookies)();return a.get("mm_admin_access_token")?.value??""}let j=async function(a){let b=await i();""===b&&(0,e.redirect)("/admin/login");let c=String(a.get("run_id")??"");await (0,g.safeJSONFetch)(new URL(`/v1/admin/runs/${encodeURIComponent(c)}/retry`,(0,g.apiBaseURL)()).toString(),{method:"POST",token:b}),(0,e.redirect)(`/admin/runs?run_id=${encodeURIComponent(c)}`)};(0,c.registerServerReference)(j,"40484dc189850c8d1d47c913ed86cf17cbc69898f5",null);let k=async function(a){let b=await i();""===b&&(0,e.redirect)("/admin/login");let c=String(a.get("run_id")??"");await (0,g.safeJSONFetch)(new URL(`/v1/admin/runs/${encodeURIComponent(c)}/cancel`,(0,g.apiBaseURL)()).toString(),{method:"POST",token:b}),(0,e.redirect)(`/admin/runs?run_id=${encodeURIComponent(c)}`)};async function l({searchParams:a}){let c=await i();if(""===c)return(0,b.jsx)(f.AdminShell,{activeNav:"Runs",subtitle:"Authenticate to inspect execution logs and run controls.",title:"Run operations",children:(0,b.jsxs)("section",{className:h.default.notice,children:[(0,b.jsx)("h2",{children:"Admin session missing"}),(0,b.jsx)("a",{href:"/admin/login",children:"Open admin login"})]})});let d=await a,e="string"==typeof d.run_id?d.run_id:"";if(""===e)return(0,b.jsx)(f.AdminShell,{activeNav:"Runs",subtitle:"Select a run id from Studio to inspect status and step logs.",title:"Run operations",children:(0,b.jsxs)("section",{className:h.default.notice,children:[(0,b.jsx)("h2",{children:"No run selected"}),(0,b.jsx)("a",{href:"/admin/studio",children:"Back to studio"})]})});let[l,m]=await Promise.all([(0,g.safeJSONFetch)(new URL(`/v1/admin/runs/${encodeURIComponent(e)}`,(0,g.apiBaseURL)()).toString(),{token:c}),(0,g.safeJSONFetch)(new URL(`/v1/admin/runs/${encodeURIComponent(e)}/logs`,(0,g.apiBaseURL)()).toString(),{token:c})]);return(0,b.jsxs)(f.AdminShell,{activeNav:"Runs",subtitle:"Inspect each step, retry failures, or cancel active jobs with full status context.",title:`Run ${l.run_id}`,children:[(0,b.jsxs)("section",{className:h.default.summary,children:[(0,b.jsxs)("article",{className:h.default.metaCard,children:[(0,b.jsx)("span",{children:"Status"}),(0,b.jsx)("strong",{className:h.default.statusPill,"data-status":l.status.toLowerCase(),children:l.status})]}),(0,b.jsxs)("article",{className:h.default.metaCard,children:[(0,b.jsx)("span",{children:"Workflow"}),(0,b.jsx)("strong",{children:l.workflow_id})]}),(0,b.jsxs)("article",{className:h.default.metaCard,children:[(0,b.jsx)("span",{children:"Priority"}),(0,b.jsx)("strong",{children:l.priority})]})]}),(0,b.jsxs)("section",{className:h.default.panel,children:[(0,b.jsx)("h2",{children:"Run controls"}),(0,b.jsxs)("p",{children:["Last error: ",l.last_error||"none"]}),(0,b.jsxs)("div",{className:h.default.actions,children:[(0,b.jsxs)("form",{action:j,children:[(0,b.jsx)("input",{name:"run_id",type:"hidden",value:l.run_id}),(0,b.jsx)("button",{type:"submit",children:"Retry run"})]}),(0,b.jsxs)("form",{action:k,children:[(0,b.jsx)("input",{name:"run_id",type:"hidden",value:l.run_id}),(0,b.jsx)("button",{type:"submit",children:"Cancel run"})]}),(0,b.jsx)("a",{href:"/admin/studio",children:"Back to studio"})]})]}),(0,b.jsxs)("section",{className:h.default.panel,children:[(0,b.jsx)("h2",{children:"Run logs"}),(0,b.jsx)("ul",{className:h.default.logList,children:0===m.logs.length?(0,b.jsx)("li",{className:h.default.empty,children:"No logs available for this run yet."}):m.logs.map((a,c)=>(0,b.jsxs)("li",{children:[(0,b.jsxs)("div",{className:h.default.logMeta,children:[(0,b.jsx)("span",{children:a.event_time}),(0,b.jsx)("strong",{children:a.step}),(0,b.jsx)("em",{"data-status":a.status.toLowerCase(),children:a.status})]}),(0,b.jsx)("p",{children:a.message})]},`${a.event_time}-${c}`))})]})]})}(0,c.registerServerReference)(k,"4068e1056cb3228bd9c72ed894a0af88bdb115eff4",null),a.s(["$$RSC_SERVER_ACTION_0",0,j,"$$RSC_SERVER_ACTION_1",0,k,"default",()=>l,"dynamic",0,"force-dynamic"])},43982,a=>{"use strict";var b=a.i(99244);a.s([],18219),a.i(18219),a.s(["40484dc189850c8d1d47c913ed86cf17cbc69898f5",()=>b.$$RSC_SERVER_ACTION_0,"4068e1056cb3228bd9c72ed894a0af88bdb115eff4",()=>b.$$RSC_SERVER_ACTION_1],43982)}];

//# sourceMappingURL=_4dd1c2c2._.js.map