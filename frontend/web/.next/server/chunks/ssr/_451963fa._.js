module.exports=[68485,a=>{a.v({empty:"page-module__Dz4TcW__empty",form:"page-module__Dz4TcW__form",grid:"page-module__Dz4TcW__grid",hero:"page-module__Dz4TcW__hero",inlineForm:"page-module__Dz4TcW__inlineForm",list:"page-module__Dz4TcW__list",notice:"page-module__Dz4TcW__notice",panel:"page-module__Dz4TcW__panel",workflowMeta:"page-module__Dz4TcW__workflowMeta"})},71690,a=>{"use strict";var b=a.i(7997),c=a.i(37936),d=a.i(5246);a.i(70396);var e=a.i(73727),f=a.i(61517),g=a.i(41931),h=a.i(68485);async function i(){let a=await (0,d.cookies)();return a.get("mm_admin_access_token")?.value??""}let j=async function(a){let b=await i();""===b&&(0,e.redirect)("/admin/login");let c={name:String(a.get("name")??"").trim(),description:String(a.get("description")??"").trim(),content_suitability:String(a.get("content_suitability")??"core"),age_band:String(a.get("age_band")??"6-11"),steps:String(a.get("steps")??"prompt,generate,qc").split(",").map(a=>a.trim()).filter(Boolean),model_profile_id:String(a.get("model_profile_id")??"nim-default"),safety_profile:String(a.get("safety_profile")??"strict")};await (0,g.safeJSONFetch)(new URL("/v1/admin/workflows",(0,g.apiBaseURL)()).toString(),{method:"POST",body:c,token:b}),(0,e.redirect)("/admin/studio")};(0,c.registerServerReference)(j,"409cc91df710ff7ee2de0b9ba8cbf4ab9417f050cd",null);let k=async function(a){let b=await i();""===b&&(0,e.redirect)("/admin/login");let c=String(a.get("model_profile_id")??"nim-default"),d={model_profile_id:c,provider:"nvidia_nim",base_url:String(a.get("base_url")??"http://127.0.0.1:9000"),model_id:String(a.get("model_id")??"nim-video-v1"),timeout_ms:Number(a.get("timeout_ms")??12e3),max_retries:Number(a.get("max_retries")??2),safety_preset:String(a.get("safety_preset")??"kids_strict")};await (0,g.safeJSONFetch)(new URL(`/v1/admin/model-profiles/${encodeURIComponent(c)}`,(0,g.apiBaseURL)()).toString(),{method:"PUT",body:d,token:b}),(0,e.redirect)("/admin/studio")};(0,c.registerServerReference)(k,"4077c494618056d0c122487c6c21fe4d49a86728a5",null);let l=async function(a){let b=await i();""===b&&(0,e.redirect)("/admin/login");let c=String(a.get("workflow_id")??"");""===c&&(0,e.redirect)("/admin/studio");let d=await (0,g.safeJSONFetch)(new URL(`/v1/admin/workflows/${encodeURIComponent(c)}/runs`,(0,g.apiBaseURL)()).toString(),{method:"POST",body:{input_payload:{title_hint:String(a.get("title_hint")??"Mission"),topic:String(a.get("topic")??"science")},priority:String(a.get("priority")??"normal"),auto_publish:!1},token:b});(0,e.redirect)(`/admin/runs?run_id=${encodeURIComponent(d.run_id)}`)};async function m(){let a=await i();if(""===a)return(0,b.jsx)(f.AdminShell,{activeNav:"Studio",subtitle:"Authenticate first to configure workflows and start generation runs.",title:"Admin studio",children:(0,b.jsxs)("section",{className:h.default.notice,children:[(0,b.jsx)("h2",{children:"Admin session missing"}),(0,b.jsx)("p",{children:"Login as admin to access workflow operations."}),(0,b.jsx)("a",{href:"/admin/login",children:"Open admin login"})]})});let[c,d]=await Promise.all([(0,g.safeJSONFetch)(new URL("/v1/admin/workflows",(0,g.apiBaseURL)()).toString(),{token:a}),(0,g.safeJSONFetch)(new URL("/v1/admin/model-profiles/nim-default",(0,g.apiBaseURL)()).toString(),{token:a})]);return(0,b.jsxs)(f.AdminShell,{activeNav:"Studio",subtitle:"Configure model profiles, maintain workflow templates, and launch controlled generation runs.",title:"Admin studio",children:[(0,b.jsxs)("section",{className:h.default.hero,children:[(0,b.jsxs)("article",{children:[(0,b.jsxs)("h2",{children:[c.workflows.length," workflow templates"]}),(0,b.jsx)("p",{children:"Templates are versioned and tied to age-band and safety suitability."})]}),(0,b.jsxs)("article",{children:[(0,b.jsx)("h2",{children:d.model_profile_id}),(0,b.jsxs)("p",{children:["Provider ",d.provider," · timeout ",d.timeout_ms,"ms · retries ",d.max_retries]})]})]}),(0,b.jsxs)("section",{className:h.default.grid,children:[(0,b.jsxs)("article",{className:h.default.panel,children:[(0,b.jsx)("h2",{children:"Model profile"}),(0,b.jsxs)("form",{action:k,className:h.default.form,children:[(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Profile ID"}),(0,b.jsx)("input",{defaultValue:d.model_profile_id,name:"model_profile_id",readOnly:!0})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Base URL"}),(0,b.jsx)("input",{defaultValue:d.base_url,name:"base_url",placeholder:"NIM base url",required:!0})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Model ID"}),(0,b.jsx)("input",{defaultValue:d.model_id,name:"model_id",placeholder:"model id",required:!0})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Timeout (ms)"}),(0,b.jsx)("input",{defaultValue:d.timeout_ms,min:500,name:"timeout_ms",type:"number"})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Max retries"}),(0,b.jsx)("input",{defaultValue:d.max_retries,min:0,name:"max_retries",type:"number"})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Safety preset"}),(0,b.jsx)("input",{defaultValue:d.safety_preset,name:"safety_preset",required:!0})]}),(0,b.jsx)("button",{type:"submit",children:"Update model profile"})]})]}),(0,b.jsxs)("article",{className:h.default.panel,children:[(0,b.jsx)("h2",{children:"Create workflow"}),(0,b.jsxs)("form",{action:j,className:h.default.form,children:[(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Name"}),(0,b.jsx)("input",{name:"name",placeholder:"Name",required:!0})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Beschreibung"}),(0,b.jsx)("input",{name:"description",placeholder:"Beschreibung",required:!0})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Content suitability"}),(0,b.jsxs)("select",{defaultValue:"core",name:"content_suitability",children:[(0,b.jsx)("option",{value:"early",children:"early"}),(0,b.jsx)("option",{value:"core",children:"core"}),(0,b.jsx)("option",{value:"teen",children:"teen"})]})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Age band"}),(0,b.jsxs)("select",{defaultValue:"6-11",name:"age_band",children:[(0,b.jsx)("option",{value:"3-5",children:"3-5"}),(0,b.jsx)("option",{value:"6-11",children:"6-11"}),(0,b.jsx)("option",{value:"12-16",children:"12-16"})]})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Pipeline steps"}),(0,b.jsx)("input",{defaultValue:"prompt,generate,qc",name:"steps",required:!0})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Model profile ID"}),(0,b.jsx)("input",{defaultValue:"nim-default",name:"model_profile_id",required:!0})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Safety profile"}),(0,b.jsx)("input",{defaultValue:"strict",name:"safety_profile",required:!0})]}),(0,b.jsx)("button",{type:"submit",children:"Create workflow"})]})]})]}),(0,b.jsxs)("section",{className:h.default.panel,children:[(0,b.jsx)("h2",{children:"Workflow templates"}),(0,b.jsx)("ul",{className:h.default.list,children:0===c.workflows.length?(0,b.jsx)("li",{className:h.default.empty,children:"No templates yet. Create your first workflow above."}):c.workflows.map(a=>(0,b.jsxs)("li",{children:[(0,b.jsxs)("div",{className:h.default.workflowMeta,children:[(0,b.jsx)("strong",{children:a.name}),(0,b.jsx)("p",{children:a.description}),(0,b.jsxs)("span",{children:[a.age_band," · ",a.content_suitability," · v",a.version," · ",a.model_profile_id]}),(0,b.jsxs)("em",{children:["Steps: ",a.steps.join(" → ")]})]}),(0,b.jsxs)("form",{action:l,className:h.default.inlineForm,children:[(0,b.jsx)("input",{name:"workflow_id",type:"hidden",value:a.workflow_id}),(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Title hint"}),(0,b.jsx)("input",{defaultValue:"Mika Mission",name:"title_hint",placeholder:"Title hint",required:!0})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("span",{children:"Topic"}),(0,b.jsx)("input",{defaultValue:"teamwork",name:"topic",placeholder:"Topic",required:!0})]}),(0,b.jsx)("button",{type:"submit",children:"Start run"})]})]},a.workflow_id))})]})]})}(0,c.registerServerReference)(l,"4051db02b3319084a335809fae03beaba3e21471a1",null),a.s(["$$RSC_SERVER_ACTION_0",0,j,"$$RSC_SERVER_ACTION_1",0,k,"$$RSC_SERVER_ACTION_2",0,l,"default",()=>m,"dynamic",0,"force-dynamic"])},817,a=>{"use strict";var b=a.i(71690);a.s([],87845),a.i(87845),a.s(["4051db02b3319084a335809fae03beaba3e21471a1",()=>b.$$RSC_SERVER_ACTION_2,"4077c494618056d0c122487c6c21fe4d49a86728a5",()=>b.$$RSC_SERVER_ACTION_1,"409cc91df710ff7ee2de0b9ba8cbf4ab9417f050cd",()=>b.$$RSC_SERVER_ACTION_0],817)}];

//# sourceMappingURL=_451963fa._.js.map