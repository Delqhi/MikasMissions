{"version":3,"sources":["../../../../app/kids/early/page.tsx"],"sourcesContent":["import { KidsShell } from \"../../../components/layout/kids_shell\";\nimport { SectionHeading } from \"../../../components/ui/section_heading\";\nimport { StoryCard } from \"../../../components/ui/story_card\";\nimport { EpisodeTile } from \"../../../components/ui/episode_tile\";\nimport { ParentGatePrompt } from \"../../../components/ui/parent_gate_prompt\";\nimport { fetchKidsHome } from \"../../../lib/fetch_kids_home\";\nimport { fetchKidsProgress } from \"../../../lib/fetch_kids_progress\";\nimport { accessTokenFromCookie } from \"../../../lib/server_auth\";\nimport styles from \"../kids_page.module.css\";\n\nexport const dynamic = \"force-dynamic\";\n\ntype KidsPageProps = {\n  searchParams: Promise<Record<string, string | string[] | undefined>>;\n};\n\nexport default async function KidsEarlyPage({ searchParams }: KidsPageProps) {\n  const params = await searchParams;\n  const childProfileID = typeof params.child_profile_id === \"string\" ? params.child_profile_id : \"\";\n  if (childProfileID === \"\") {\n    return (\n      <KidsShell\n        activeNav=\"Stories\"\n        ageBand=\"3-5\"\n        mode=\"early\"\n        navItems={[\n          { label: \"Stories\", href: \"/kids/early#featured\" },\n          { label: \"Missions\", href: \"/kids/early#missions\" },\n          { label: \"Favorites\", href: \"/kids/early#picks\" },\n          { label: \"Bedtime\", href: \"/parents/onboarding\" }\n        ]}\n        profileName=\"Setup required\"\n        sessionLimitMinutes={0}\n        subtitle=\"Please create a child profile first\"\n        watchedMinutes={0}\n      >\n        <div className=\"stack\">\n          <section className={styles.focusCard}>\n            <h3>Missing child profile</h3>\n            <p>Open parent onboarding and create a profile to continue.</p>\n            <a href=\"/parents/onboarding\">Go to onboarding</a>\n          </section>\n        </div>\n      </KidsShell>\n    );\n  }\n  const token = await accessTokenFromCookie();\n  const [home, progress] = await Promise.all([\n    fetchKidsHome(\"early\", childProfileID, token),\n    fetchKidsProgress(\"early\", childProfileID, token)\n  ]);\n  const featured = home.rails[0];\n  const featuredItems = home.rails.slice(0, 2);\n\n  return (\n    <KidsShell\n      activeNav=\"Stories\"\n      ageBand=\"3-5\"\n      mode=\"early\"\n      navItems={[\n        { label: \"Stories\", href: `/kids/early?child_profile_id=${encodeURIComponent(childProfileID)}#featured` },\n        { label: \"Missions\", href: `/kids/early?child_profile_id=${encodeURIComponent(childProfileID)}#missions` },\n        { label: \"Favorites\", href: `/kids/early?child_profile_id=${encodeURIComponent(childProfileID)}#picks` },\n        { label: \"Bedtime\", href: `/parents?child_profile_id=${encodeURIComponent(childProfileID)}` }\n      ]}\n      profileName=\"Mika Mini\"\n      sessionLimitMinutes={progress.session_limit_minutes}\n      subtitle=\"Audio-guided and image-first\"\n      watchedMinutes={progress.watched_minutes_today}\n    >\n      <div className=\"stack\">\n        <nav className={styles.switchRow}>\n          <a aria-current=\"page\" href={`/kids/early?child_profile_id=${encodeURIComponent(childProfileID)}`}>\n            3-5\n          </a>\n          <a href={`/kids/core?child_profile_id=${encodeURIComponent(childProfileID)}`}>6-11</a>\n          <a href={`/kids/teen?child_profile_id=${encodeURIComponent(childProfileID)}`}>12-16</a>\n          <a href={`/parents?child_profile_id=${encodeURIComponent(childProfileID)}`}>Parents</a>\n        </nav>\n\n        <section className={styles.heroPanel} id=\"featured\">\n          <img alt=\"\" src={featured.thumbnail_url} />\n          <div className={styles.heroShade} />\n          <div className={styles.heroBody}>\n            <span className={styles.heroKicker}>Early featured</span>\n            <h2>{featured.title}</h2>\n            <p>{featured.summary}</p>\n            <div className={styles.heroActions}>\n              <a className={styles.heroPlay} href={`/kids/early?child_profile_id=${encodeURIComponent(childProfileID)}`}>\n                Start story\n              </a>\n              <a className={styles.heroInfo} href={`/parents?child_profile_id=${encodeURIComponent(childProfileID)}`}>\n                Guardian view\n              </a>\n            </div>\n            <ul className={styles.heroMeta}>\n              <li>{progress.session_limit_minutes} min limit</li>\n              <li>{progress.watched_minutes_today} min today</li>\n              <li>Guided-only navigation</li>\n            </ul>\n          </div>\n        </section>\n\n        <section className=\"railSection\" id=\"missions\">\n          <SectionHeading\n            description=\"Large visuals, guided audio prompts, and no free-search surface for early learners.\"\n            title=\"Today\\'s guided adventures\"\n          />\n          <div className={styles.storyRow}>\n            {featuredItems.map((item, index) => (\n              <StoryCard index={index} item={item} key={item.episode_id} />\n            ))}\n          </div>\n        </section>\n\n        <section className=\"railSection\" id=\"picks\">\n          <SectionHeading\n            description=\"Every route has short click paths and clear return points to avoid confusion.\"\n            title=\"Safe picks\"\n          />\n          <div className={styles.tileRow}>\n            {home.rails.map((item) => (\n              <EpisodeTile episode={item} key={item.episode_id} />\n            ))}\n          </div>\n        </section>\n\n        <section className={styles.calloutGrid}>\n          <article className={styles.focusCard}>\n            <h3>Audio-first guidance</h3>\n            <p>Focused prompts help non-readers complete actions without trial-and-error taps.</p>\n          </article>\n          <article className={styles.focusCard}>\n            <h3>No open exploration feed</h3>\n            <p>Finite curated rails prevent infinite browsing loops for ages 3-5.</p>\n          </article>\n          <ParentGatePrompt actionLabel=\"Open external activity link\" challengeType=\"device_confirm\" />\n        </section>\n      </div>\n    </KidsShell>\n  );\n}\n"],"names":[],"mappings":"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"}