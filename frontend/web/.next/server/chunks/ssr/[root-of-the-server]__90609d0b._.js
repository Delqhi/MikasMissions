module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},95044,a=>{a.n(a.i(52425))},81089,a=>{a.n(a.i(48760))},70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},39218,a=>{"use strict";let b={thumbnail_url:"https://images.unsplash.com/photo-1502082553048-f009c37129b9?auto=format&fit=crop&w=900&q=80",duration_ms:54e4,safety_applied:!0,age_fit_score:.94},c=[{episode_id:"ep-rainbow-quest",title:"Rainbow Quest",summary:"Color matching adventure with guided voice prompts.",age_band:"3-5",learning_tags:["colors","coordination"],reason_code:"guided_story",content_suitability:"early",...b},{episode_id:"ep-sound-garden",title:"Sound Garden",summary:"Find friendly sounds and learn animal voices.",age_band:"3-5",learning_tags:["listening","animals"],reason_code:"safe_curation",content_suitability:"early",...b}],d=[{episode_id:"ep-space-builders",title:"Space Builders",summary:"Mission-based series on planets and engineering basics.",age_band:"6-11",learning_tags:["science","problem_solving"],reason_code:"learning_path",content_suitability:"core",...b},{episode_id:"ep-logic-lab",title:"Logic Lab",summary:"Short puzzle episodes with progress checkpoints.",age_band:"6-11",learning_tags:["logic","math"],reason_code:"progress_resume",content_suitability:"core",...b},{episode_id:"ep-earth-club",title:"Earth Club",summary:"Hands-on sustainability challenges for kids.",age_band:"6-11",learning_tags:["nature","teamwork"],reason_code:"safe_explore",content_suitability:"core",...b}],e=[{episode_id:"ep-future-studio",title:"Future Studio",summary:"Creator stories from design, coding, and science labs.",age_band:"12-16",learning_tags:["creativity","career_sparks"],reason_code:"interest_match",content_suitability:"teen",...b},{episode_id:"ep-debate-room",title:"Debate Room",summary:"Structured argument episodes with moderation safety.",age_band:"12-16",learning_tags:["critical_thinking","communication"],reason_code:"age_appropriate_explore",content_suitability:"teen",...b}];a.s(["demoProfiles",0,[{profile_id:"child-early-01",name:"Mika Mini",age_band:"3-5",mode:"early",subtitle:"Audio-guided missions",href:"/kids/early"},{profile_id:"child-core-01",name:"Mika Explorer",age_band:"6-11",mode:"core",subtitle:"Curated learning rails",href:"/kids/core"},{profile_id:"child-teen-01",name:"Mika Studio",age_band:"12-16",mode:"teen",subtitle:"Explore with active safety",href:"/kids/teen"}],"kidsHomeFallback",0,{early:{child_profile_id:"child-early-01",mode:"early",safety_mode:"strict",primary_actions:["Start","Mission","Favorites","Pause"],rails:c},core:{child_profile_id:"child-core-01",mode:"core",safety_mode:"strict",primary_actions:["Resume","Mission","Explore","Progress","Library"],rails:d},teen:{child_profile_id:"child-teen-01",mode:"teen",safety_mode:"strict",primary_actions:["Watch","Watchlist","Explore","Learn","Report"],rails:e}},"kidsProgressFallback",0,{early:{child_profile_id:"child-early-01",watched_minutes_today:18,watched_minutes_7d:90,completion_percent:42,mission_streak_days:1,session_limit_minutes:35,session_minutes_used:18,session_capped:!1,last_episode_id:"ep-rainbow-quest"},core:{child_profile_id:"child-core-01",watched_minutes_today:32,watched_minutes_7d:140,completion_percent:61,mission_streak_days:3,session_limit_minutes:50,session_minutes_used:32,session_capped:!1,last_episode_id:"ep-space-builders"},teen:{child_profile_id:"child-teen-01",watched_minutes_today:44,watched_minutes_7d:210,completion_percent:57,mission_streak_days:2,session_limit_minutes:75,session_minutes_used:44,session_capped:!1,last_episode_id:"ep-future-studio"}},"parentControlsFallback",0,{child_profile_id:"child-core-01",controls:{autoplay:!1,chat_enabled:!1,external_links:!1,session_limit_minutes:50,bedtime_window:"20:00-07:00",safety_mode:"strict"}}])},71695,a=>{a.v({header:"section_heading-module__3HHVIa__header"})},95898,18826,5361,a=>{"use strict";var b=a.i(7997),c=a.i(71695);function d({title:a,description:d}){return(0,b.jsxs)("header",{className:c.default.header,children:[(0,b.jsx)("h2",{children:a}),(0,b.jsx)("p",{children:d})]})}a.s(["SectionHeading",()=>d],95898);var e=a.i(41931),f=a.i(39218);async function g(a,b,c){let d=new URL(`/v1/kids/progress/${b}`,(0,e.apiBaseURL)());try{return await (0,e.safeJSONFetch)(d.toString(),{token:c})}catch(b){if((0,e.useFallbackData)())return f.kidsProgressFallback[a];throw b}}a.s(["fetchKidsProgress",()=>g],18826);var h=a.i(5246);async function i(){let a=await (0,h.cookies)();return a.get("mm_access_token")?.value??""}async function j(){let a=await (0,h.cookies)();return a.get("mm_parent_user_id")?.value??""}a.s(["accessTokenFromCookie",()=>i,"parentUserIDFromCookie",()=>j],5361)},86375,a=>{a.v({active:"parents_nav-module__gv2CIa__active",idle:"parents_nav-module__gv2CIa__idle",nav:"parents_nav-module__gv2CIa__nav"})},11046,a=>{a.v({actions:"parents_shell-module__gfw0wG__actions",backdrop:"parents_shell-module__gfw0wG__backdrop",header:"parents_shell-module__gfw0wG__header",kicker:"parents_shell-module__gfw0wG__kicker",main:"parents_shell-module__gfw0wG__main",page:"parents_shell-module__gfw0wG__page",primaryLink:"parents_shell-module__gfw0wG__primaryLink",switchLink:"parents_shell-module__gfw0wG__switchLink"})},10997,a=>{"use strict";a.s(["ParentControlPanel",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ParentControlPanel() from the server but ParentControlPanel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/parent_control_panel.tsx <module evaluation>","ParentControlPanel")},14394,a=>{"use strict";a.s(["ParentControlPanel",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ParentControlPanel() from the server but ParentControlPanel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/parent_control_panel.tsx","ParentControlPanel")},41397,a=>{"use strict";a.i(10997);var b=a.i(14394);a.n(b)},67824,a=>{a.v({cardActions:"page-module__rbMIXq__cardActions",cardPrimary:"page-module__rbMIXq__cardPrimary",cardSecondary:"page-module__rbMIXq__cardSecondary",cardTag:"page-module__rbMIXq__cardTag",gate:"page-module__rbMIXq__gate",hero:"page-module__rbMIXq__hero",heroActions:"page-module__rbMIXq__heroActions",heroBody:"page-module__rbMIXq__heroBody",heroStats:"page-module__rbMIXq__heroStats",kicker:"page-module__rbMIXq__kicker",layout:"page-module__rbMIXq__layout",metricCard:"page-module__rbMIXq__metricCard",metricsGrid:"page-module__rbMIXq__metricsGrid",notice:"page-module__rbMIXq__notice",primaryAction:"page-module__rbMIXq__primaryAction",reportCard:"page-module__rbMIXq__reportCard",reportGrid:"page-module__rbMIXq__reportGrid",secondaryAction:"page-module__rbMIXq__secondaryAction",stack:"page-module__rbMIXq__stack"})},74449,a=>{"use strict";var b=a.i(7997),c=a.i(86375);let d=[{label:"Dashboard",href:"/parents#dashboard"},{label:"Controls",href:"/parents#controls"},{label:"Compliance",href:"/parents#compliance"},{label:"Onboarding",href:"/parents/onboarding"}];function e({active:a}){return(0,b.jsx)("nav",{"aria-label":"Parents navigation",className:c.default.nav,children:d.map(d=>(0,b.jsx)("a",{"aria-current":d.label===a?"page":void 0,className:d.label===a?c.default.active:c.default.idle,href:d.href,children:d.label},d.label))})}var f=a.i(11046);function g({heading:a,description:c="Consent, controls, reports, and emergency overrides in one place.",activeNav:d="Dashboard",children:g}){return(0,b.jsxs)("div",{className:`${f.default.page} mode-parent`,children:[(0,b.jsx)("div",{"aria-hidden":"true",className:f.default.backdrop}),(0,b.jsxs)("header",{className:f.default.header,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:f.default.kicker,children:"Parent Command"}),(0,b.jsx)("h1",{children:a}),(0,b.jsx)("span",{children:c})]}),(0,b.jsxs)("div",{className:f.default.actions,children:[(0,b.jsx)("a",{className:f.default.primaryLink,href:"/parents/onboarding",children:"Add child profile"}),(0,b.jsx)("a",{className:f.default.switchLink,href:"/",children:"Switch profile"})]})]}),(0,b.jsx)(e,{active:d}),(0,b.jsx)("main",{className:f.default.main,children:g})]})}var h=a.i(41397),i=a.i(95898),j=a.i(41931);async function k(a,b){let c=new URL("/v1/children/profiles",(0,j.apiBaseURL)());return a&&c.searchParams.set("parent_user_id",a),(await (0,j.safeJSONFetch)(c.toString(),{token:b})).profiles}var l=a.i(18826),m=a.i(39218);async function n(a,b,c){let d=new URL(`/v1/parents/controls/${a}`,(0,j.apiBaseURL)());d.searchParams.set("parent_user_id",b);try{return await (0,j.safeJSONFetch)(d.toString(),{token:c})}catch(a){if((0,j.useFallbackData)())return m.parentControlsFallback;throw a}}var o=a.i(5361),p=a.i(67824);function q(a){switch(a){case"3-5":return"early";case"12-16":return"teen";default:return"core"}}async function r({searchParams:a}){let c=await (0,o.accessTokenFromCookie)(),d=await (0,o.parentUserIDFromCookie)();if(""===c||""===d)return(0,b.jsx)(g,{activeNav:"Onboarding",description:"A valid parent session is required before controls can be edited.",heading:"Parent onboarding required",children:(0,b.jsxs)("section",{className:p.default.notice,children:[(0,b.jsx)("h3",{children:"Session missing"}),(0,b.jsx)("p",{children:"Start onboarding to create an authenticated parent session and unlock all controls."}),(0,b.jsx)("a",{href:"/parents/onboarding",children:"Open onboarding"})]})});let e=await k(d,c);if(0===e.length)return(0,b.jsx)(g,{activeNav:"Onboarding",description:"Create at least one child profile to activate kids mode and policy controls.",heading:"No child profiles found",children:(0,b.jsxs)("section",{className:p.default.notice,children:[(0,b.jsx)("h3",{children:"Create first child profile"}),(0,b.jsx)("p",{children:"Run onboarding once to create the first profile and initialize guardrails."}),(0,b.jsx)("a",{href:"/parents/onboarding",children:"Create profile"})]})});let f=await a,j="string"==typeof f.child_profile_id?f.child_profile_id:"",m=e.find(a=>a.child_profile_id===j)??e[0],[r,s,t]=await Promise.all([n(m.child_profile_id,d,c),(0,l.fetchKidsProgress)(q(m.age_band),m.child_profile_id,c),Promise.all(e.map(async a=>{let b=await (0,l.fetchKidsProgress)(q(a.age_band),a.child_profile_id,c);return{profile:a,progress:b}}))]),u=t.reduce((a,b)=>a+b.progress.watched_minutes_today,0),v=`/kids/${q(m.age_band)}?child_profile_id=${encodeURIComponent(m.child_profile_id)}`;return(0,b.jsx)(g,{description:"Set strict defaults once, review daily behavior quickly, and adjust per child in seconds.",heading:"Family safety and learning operations",children:(0,b.jsxs)("div",{className:p.default.layout,children:[(0,b.jsxs)("section",{className:p.default.hero,id:"dashboard",children:[(0,b.jsxs)("div",{className:p.default.heroBody,children:[(0,b.jsx)("span",{className:p.default.kicker,children:"Live profile"}),(0,b.jsxs)("h2",{children:[m.display_name," Â· ",m.age_band]}),(0,b.jsxs)("p",{children:["Active safety mode is ",(0,b.jsx)("strong",{children:r.controls.safety_mode}),". Session usage is continuously tracked and policy changes are audit logged."]}),(0,b.jsxs)("div",{className:p.default.heroActions,children:[(0,b.jsx)("a",{className:p.default.primaryAction,href:v,children:"Open kids mode"}),(0,b.jsx)("a",{className:p.default.secondaryAction,href:"/parents/onboarding",children:"Add another child"})]})]}),(0,b.jsxs)("ul",{className:p.default.heroStats,children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{children:"Total watched today"}),(0,b.jsxs)("strong",{children:[u," min"]})]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{children:"Current session usage"}),(0,b.jsxs)("strong",{children:[s.session_minutes_used,"/",s.session_limit_minutes," min"]})]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{children:"Bedtime window"}),(0,b.jsx)("strong",{children:r.controls.bedtime_window})]})]})]}),(0,b.jsxs)("section",{className:p.default.stack,children:[(0,b.jsx)(i.SectionHeading,{description:"Switch profile context, jump into kids mode, and manage controls without losing orientation.",title:"Profiles and quick actions"}),(0,b.jsx)("section",{className:p.default.reportGrid,children:e.map(a=>{let c=a.child_profile_id===m.child_profile_id;return(0,b.jsxs)("article",{className:p.default.reportCard,children:[(0,b.jsx)("span",{className:p.default.cardTag,children:c?"Selected":a.age_band}),(0,b.jsx)("h3",{children:a.display_name}),(0,b.jsxs)("p",{children:["Age band ",a.age_band,". Policies can be tuned independently while preserving global safety defaults."]}),(0,b.jsxs)("div",{className:p.default.cardActions,children:[(0,b.jsx)("a",{className:p.default.cardPrimary,href:`/parents?child_profile_id=${encodeURIComponent(a.child_profile_id)}`,children:"Manage profile"}),(0,b.jsx)("a",{className:p.default.cardSecondary,href:`/kids/${q(a.age_band)}?child_profile_id=${encodeURIComponent(a.child_profile_id)}`,children:"Open kids mode"})]})]},a.child_profile_id)})})]}),(0,b.jsx)(h.ParentControlPanel,{childProfileID:r.child_profile_id,initialControls:r.controls}),(0,b.jsxs)("section",{className:p.default.stack,id:"compliance",children:[(0,b.jsx)(i.SectionHeading,{description:"A compact compliance view for daily checks and policy confidence.",title:"Compliance snapshot"}),(0,b.jsxs)("section",{className:p.default.metricsGrid,children:[(0,b.jsxs)("article",{className:p.default.metricCard,children:[(0,b.jsx)("h3",{children:"Session cap compliance"}),(0,b.jsxs)("p",{children:[m.display_name,": ",s.session_minutes_used,"/",s.session_limit_minutes," min"]}),(0,b.jsx)("span",{children:"Policy retained"})]}),(0,b.jsxs)("article",{className:p.default.metricCard,children:[(0,b.jsx)("h3",{children:"Safety filter coverage"}),(0,b.jsx)("p",{children:"100% of recommendation rails include reason codes and safety metadata."}),(0,b.jsx)("span",{children:"Trust signal"})]}),(0,b.jsxs)("article",{className:p.default.metricCard,children:[(0,b.jsx)("h3",{children:"Audit readiness"}),(0,b.jsx)("p",{children:"Every control mutation writes to the parent audit trail and can be reviewed by run."}),(0,b.jsx)("span",{children:"Operational log"})]})]})]}),(0,b.jsxs)("section",{className:p.default.gate,children:[(0,b.jsx)("h3",{children:"Adaptive parent gate"}),(0,b.jsxs)("p",{children:["External links, purchases, and account changes require verification. Current policy: ",(0,b.jsx)("strong",{children:"device confirm + PIN fallback"}),"."]})]})]})})}a.s(["default",()=>r,"dynamic",0,"force-dynamic"],74449)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__90609d0b._.js.map