{"version":3,"sources":["../../../../node_modules/next/dist/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js","../../../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js","turbopack:///[project]/components/ui/parent_control_panel.module.css [app-ssr] (css module)","../../../../components/ui/parent_control_panel.tsx"],"sourcesContent":["\"use strict\";\nif (process.env.NEXT_RUNTIME === 'edge') {\n    module.exports = require('next/dist/server/route-modules/app-page/module.js');\n} else {\n    if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n        if (process.env.NODE_ENV === 'development') {\n            if (process.env.TURBOPACK) {\n                module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js');\n            } else {\n                module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js');\n            }\n        } else {\n            if (process.env.TURBOPACK) {\n                module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js');\n            } else {\n                module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js');\n            }\n        }\n    } else {\n        if (process.env.NODE_ENV === 'development') {\n            if (process.env.TURBOPACK) {\n                module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js');\n            } else {\n                module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js');\n            }\n        } else {\n            if (process.env.TURBOPACK) {\n                module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js');\n            } else {\n                module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js');\n            }\n        }\n    }\n}\n\n//# sourceMappingURL=module.compiled.js.map","\"use strict\";\nmodule.exports = require('../../module.compiled').vendored['react-ssr'].ReactJsxRuntime;\n\n//# sourceMappingURL=react-jsx-runtime.js.map","\"use strict\";\nmodule.exports = require('../../module.compiled').vendored['react-ssr'].React;\n\n//# sourceMappingURL=react.js.map","__turbopack_context__.v({\n  \"badges\": \"parent_control_panel-module__Bj30lW__badges\",\n  \"disabled\": \"parent_control_panel-module__Bj30lW__disabled\",\n  \"enabled\": \"parent_control_panel-module__Bj30lW__enabled\",\n  \"footer\": \"parent_control_panel-module__Bj30lW__footer\",\n  \"grid\": \"parent_control_panel-module__Bj30lW__grid\",\n  \"header\": \"parent_control_panel-module__Bj30lW__header\",\n  \"panel\": \"parent_control_panel-module__Bj30lW__panel\",\n  \"toggles\": \"parent_control_panel-module__Bj30lW__toggles\",\n});\n","\"use client\";\n\nimport { useState } from \"react\";\nimport type { ParentalControls } from \"../../lib/experience_types\";\nimport styles from \"./parent_control_panel.module.css\";\n\ntype ParentControlPanelProps = {\n  childProfileID: string;\n  initialControls: ParentalControls;\n};\n\ntype ToggleField = \"autoplay\" | \"chat_enabled\" | \"external_links\";\n\ntype ToggleMeta = {\n  label: string;\n  detail: string;\n};\n\nconst toggleMeta: Record<ToggleField, ToggleMeta> = {\n  autoplay: {\n    label: \"Autoplay\",\n    detail: \"Automatically continue to the next approved mission\"\n  },\n  chat_enabled: {\n    label: \"Chat\",\n    detail: \"Enable protected in-app conversation surfaces\"\n  },\n  external_links: {\n    label: \"External links\",\n    detail: \"Allow leaving MikasMissions to third-party websites\"\n  }\n};\n\nexport function ParentControlPanel(props: ParentControlPanelProps) {\n  const { childProfileID, initialControls } = props;\n  const [controls, setControls] = useState(initialControls);\n  const [message, setMessage] = useState(\"Strict mode active by default.\");\n  const [saving, setSaving] = useState(false);\n\n  function toggle(field: ToggleField) {\n    setControls((previous) => ({\n      ...previous,\n      [field]: !previous[field]\n    }));\n  }\n\n  async function saveControls() {\n    setSaving(true);\n    setMessage(\"Saving parental controls...\");\n\n    try {\n      const response = await fetch(`/api/parents/controls/${childProfileID}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(controls)\n      });\n\n      if (!response.ok) {\n        setMessage(\"Save failed. Please retry.\");\n        return;\n      }\n\n      setMessage(\"Controls updated and audit logged.\");\n    } catch {\n      setMessage(\"Save failed. Please retry.\");\n    } finally {\n      setSaving(false);\n    }\n  }\n\n  return (\n    <section className={styles.panel} aria-label=\"Parent control panel\" id=\"controls\">\n      <header className={styles.header}>\n        <div>\n          <h3>Parent controls</h3>\n          <p>Configure child-safe defaults without opening every advanced setting.</p>\n        </div>\n        <div className={styles.badges}>\n          <span>Safety: {controls.safety_mode}</span>\n          <span>Session: {controls.session_limit_minutes} min</span>\n        </div>\n      </header>\n\n      <div className={styles.grid}>\n        <label>\n          Safety mode\n          <select\n            onChange={(event) =>\n              setControls((prev) => ({\n                ...prev,\n                safety_mode: event.target.value === \"balanced\" ? \"balanced\" : \"strict\"\n              }))\n            }\n            value={controls.safety_mode}\n          >\n            <option value=\"strict\">Strict</option>\n            <option value=\"balanced\">Balanced</option>\n          </select>\n        </label>\n\n        <label>\n          Session limit (minutes)\n          <input\n            max={120}\n            min={15}\n            onChange={(event) =>\n              setControls((prev) => ({\n                ...prev,\n                session_limit_minutes: Number(event.target.value)\n              }))\n            }\n            type=\"range\"\n            value={controls.session_limit_minutes}\n          />\n          <strong>{controls.session_limit_minutes} min</strong>\n        </label>\n\n        <label>\n          Bedtime window\n          <input\n            onChange={(event) =>\n              setControls((prev) => ({\n                ...prev,\n                bedtime_window: event.target.value\n              }))\n            }\n            placeholder=\"20:00-06:30\"\n            type=\"text\"\n            value={controls.bedtime_window}\n          />\n        </label>\n      </div>\n\n      <ul className={styles.toggles}>\n        {([\"autoplay\", \"chat_enabled\", \"external_links\"] as ToggleField[]).map((field) => (\n          <li key={field}>\n            <button\n              aria-pressed={controls[field]}\n              className={controls[field] ? styles.enabled : styles.disabled}\n              onClick={() => toggle(field)}\n              type=\"button\"\n            >\n              <div>\n                <span>{toggleMeta[field].label}</span>\n                <small>{toggleMeta[field].detail}</small>\n              </div>\n              <strong>{controls[field] ? \"On\" : \"Off\"}</strong>\n            </button>\n          </li>\n        ))}\n      </ul>\n\n      <footer className={styles.footer}>\n        <p role=\"status\">{message}</p>\n        <button disabled={saving} onClick={saveControls} type=\"button\">\n          {saving ? \"Saving...\" : \"Save controls\"}\n        </button>\n      </footer>\n    </section>\n  );\n}\n"],"names":[],"mappings":"0NA2BgB,EAAO,OAAO,CAAA,EAAA,CAAA,CAAA,qCC1B9B,EAAO,OAAO,CAAG,EAAA,CAAA,CAAA,OAAiC,QAAQ,CAAC,YAAY,CAAC,eAAe,EAEvF,6BCFA,EAAO,OAAO,CAAG,EAAA,CAAA,CAAA,EDE4B,KCFK,QAAQ,CAAC,YAAY,CAAC,KAAK,EAE7E,UCHA,EAAA,CAAA,CAAA,CACA,OAAA,WDEiC,mCCDjC,SAAA,gDACA,QAAA,+CACA,OAAA,8CACA,KAAA,4CACA,OAAA,8CACA,MAAA,6CACA,QAAA,8CACA,4CCPA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OAcA,IAAM,EAA8C,CAClD,SAAU,CACR,MAAO,WACP,OAAQ,qDACV,EACA,aAAc,CACZ,MAAO,OACP,OAAQ,+CACV,EACA,eAAgB,CACd,MAAO,iBACP,OAAQ,qDACV,CACF,EAEO,SAAS,EAAmB,CAA8B,EAC/D,GAAM,gBAAE,CAAc,iBAAE,CAAe,CAAE,CAAG,EACtC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GACnC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,kCACjC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GASrC,eAAe,IACb,GAAU,GACV,EAAW,+BAEX,GAAI,CASF,GAAI,CAAC,CARY,MAAM,MAAM,CAAC,sBAAsB,EAAE,EAAA,CAAgB,CAAE,CACtE,OAAQ,MACR,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,EACvB,EAAA,EAEc,EAAE,CAAE,YAChB,EAAW,8BAIb,EAAW,qCACb,CAAE,KAAM,CACN,EAAW,6BACb,QAAU,CACR,GAAU,EACZ,CACF,CAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAW,EAAA,OAAM,CAAC,KAAK,CAAE,aAAW,uBAAuB,GAAG,qBACrE,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAW,EAAA,OAAM,CAAC,MAAM,WAC9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,oBACJ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,6EAEL,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAM,CAAC,MAAM,WAC3B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAK,WAAS,EAAS,WAAW,IACnC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAK,YAAU,EAAS,qBAAqB,CAAC,gBAInD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAM,CAAC,IAAI,WACzB,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,WAAM,cAEL,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,SAAU,AAAC,GACT,EAAY,AAAC,IAAU,CACrB,EADoB,CACjB,CAAI,CACP,YAAa,AAAuB,eAAjB,MAAM,CAAC,KAAK,CAAkB,WAAa,SAChE,CAAC,EAEH,MAAO,EAAS,WAAW,WAE3B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,kBAAS,WACvB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,oBAAW,mBAI7B,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,WAAM,0BAEL,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,IAAK,IACL,IAAK,GACL,SAAU,AAAC,GACT,EAAY,AAAC,IAAU,CACrB,EADoB,CACjB,CAAI,CACP,sBAAuB,OAAO,EAAM,MAAM,CAAC,KAAK,EAClD,CAAC,EAEH,KAAK,QACL,MAAO,EAAS,qBAAqB,GAEvC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,WAAQ,EAAS,qBAAqB,CAAC,aAG1C,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,WAAM,iBAEL,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,SAAW,AAAD,GACR,EAAa,AAAD,IAAW,CACrB,EADoB,CACjB,CAAI,CACP,eAAgB,EAAM,MAAM,CAAC,KAAK,CACpC,CAAC,EAEH,YAAY,cACZ,KAAK,OACL,MAAO,EAAS,cAAc,SAKpC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,EAAA,OAAM,CAAC,OAAO,UACzB,CAAC,WAAY,eAAgB,iBAAiB,CAAmB,GAAG,CAAC,AAAC,GACtE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,eAAc,CAAQ,CAAC,EAAM,CAC7B,UAAW,CAAQ,CAAC,EAAM,CAAG,EAAA,OAAM,CAAC,OAAO,CAAG,EAAA,OAAM,CAAC,QAAQ,CAC7D,QAAS,IAAM,CArGzB,EAAa,AAAD,IAAe,CACzB,GAAG,CAAQ,CACX,CAAC,AAFuB,EAEjB,CAAE,CAAC,CAAQ,CAAC,AAmGW,EAnGL,CAC3B,CAAC,GAmGS,KAAK,mBAEL,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,CAAU,CAAC,EAAM,CAAC,KAAK,GAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAO,CAAU,CAAC,EAAM,CAAC,MAAM,MAElC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAQ,CAAQ,CAAC,EAAM,CAAG,KAAO,YAX7B,MAiBb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAW,EAAA,OAAM,CAAC,MAAM,WAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAK,kBAAU,IAClB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,SAAU,EAAQ,QAAS,EAAc,KAAK,kBACnD,EAAS,YAAc,uBAKlC","ignoreList":[0,1,2]}